{* <!-- TODO: make a list of links to download ROM --> *}

<check if="{{ @isDownloadPortalEnabled }}">
    <true>
        <div class="position-relative overflow-hidden p-3 p-md-5 m-md-3 text-center bg-light">
            <div class="mx-auto" style="max-width: 700px;">

                <repeat group="{{ @officialDevices }}" key="{{ @brand }}" value="{{ @devices }}">
                    <h1 class="display-4 font-weight-normal mb-4">{{ @brand }}</h1>

                    <check if="{{ true }}">

                        <true>
                            <div id="{{@brand}}Accordion" style="margin-bottom: 30px;">
                                <repeat group="{{ @devices }}" value="{{ @device }}">
                                    <div class="card">
                                        <div class="card-header" id="{{@device->getDeviceCodename()}}Heading">
                                            <h5 class="mb-0">
                                                <button class="btn btn-link" data-toggle="collapse"
                                                        data-target="#{{@device->getDeviceCodename()}}Collapse"
                                                        aria-expanded="true"
                                                        aria-controls="{{@device->getDeviceCodename()}}Collapse">
                                                    {{@device->getDeviceModel()}}
                                                </button>
                                            </h5>
                                        </div>

                                        <div id="{{@device->getDeviceCodename()}}Collapse" class="collapse"
                                             aria-labelledby="{{@device->getDeviceCodename()}}Heading"
                                             data-parent="#{{@brand}}Accordion">
                                            <div class="card-body text-left">
                                                <p class="text-muted" style="margin-bottom: 8px;">Brand: <b>{{
                                                    @device->getDeviceBrand() }}</b></p>
                                                <p class="text-muted" style="margin-bottom: 8px;">Model: <b>{{
                                                    @device->getDeviceModel() }}</b></p>
                                                <p class="text-muted" style="margin-bottom: 8px;">Codename: <b>{{
                                                    @device->getDeviceCodename() }}</b></p>
                                                <p class="text-muted" style="margin-bottom: 8px;">Maintainer: <b>{{
                                                    @device->getDeveloper() }}</b></p>
                                                <p class="text-muted" style="margin-bottom: 8px;">ROM size: <b>{{
                                                    round(@device->getFilesize() / 1024 / 1024, 1) }} MB</b></p>
                                                <p class="text-muted" style="margin-bottom: 8px;">Build date (version):
                                                    <b>{{ @device->getBuildDate() }}
                                                        <check if="{{ @device->getVersion() !== null }}">
                                                            <true> ({{ @device->getVersion() }})</true>
                                                        </check>
                                                    </b></p>

                                                <div class="text-center">
                                                    <a style="margin-top: auto;" href="{{ @device->getUrl() }}"
                                                       target="_blank"
                                                       class="btn btn-primary">Download</a>
                                                    <check if="{{ @device->getChangelog() !== null }}">
                                                        <true>
                                                            <a style="margin-top: auto;" class="btn btn-primary"
                                                               data-toggle="modal"
                                                               data-target="#{{@device->getDeviceCodename()}}Changelog"
                                                               href="#">
                                                                Changelog
                                                            </a>
                                                        </true>
                                                    </check>
                                                </div>


                                                <!-- Modal -->
                                                <div class="modal fade" id="{{@device->getDeviceCodename()}}Changelog"
                                                     tabindex="-1"
                                                     role="dialog" aria-labelledby="{{@device->getDeviceCodename()}}ModalTitle"
                                                     aria-hidden="true">
                                                    <div class="modal-dialog" role="document">
                                                        <div class="modal-content">
                                                            <div class="modal-header">
                                                                <h5 class="modal-title" id="{{@device->getDeviceCodename()}}ModalTitle">{{
                                                                    @device->getDeviceModel() }} Changelog</h5>
                                                                <button type="button" class="close" data-dismiss="modal"
                                                                        aria-label="Close">
                                                                    <span aria-hidden="true">&times;</span>
                                                                </button>
                                                            </div>
                                                            <div class="modal-body">
                                                                <pre>{{ @device->getChangelog() }}</pre>
                                                            </div>
                                                            <div class="modal-footer">
                                                                <button type="button" class="btn btn-secondary"
                                                                        data-dismiss="modal">Close
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </repeat>
                            </div>
                        </true>

                        <false>
                            <div class="row mb-4">
                                <repeat group="{{ @devices }}" value="{{ @device }}">
                                    <div class="card my-2" style="width: 210px; margin-left: auto; margin-right: auto;">
                                        <svg class="card-img-top rounded-circle"
                                             style="margin-top: 1.25rem; padding: 10px; width: 75px; height: 75px; margin-left: auto; margin-right: auto; background-color: #424242;"
                                             fill="#f5f5f5" width="75" height="75" viewBox="-2 -2 14 20" version="1.1"
                                             aria-hidden="true">
                                            <path fill-rule="evenodd"
                                                  d="M9 0H1C.45 0 0 .45 0 1v14c0 .55.45 1 1 1h8c.55 0 1-.45 1-1V1c0-.55-.45-1-1-1zM5 15.3c-.72 0-1.3-.58-1.3-1.3 0-.72.58-1.3 1.3-1.3.72 0 1.3.58 1.3 1.3 0 .72-.58 1.3-1.3 1.3zM9 12H1V2h8v10z"></path>
                                        </svg>
                                        <div class="card-body"
                                             style="display: flex; flex-direction: column; align-items: center; justify-content: center; align-self: center">
                                            <h5 style="margin-bottom: 0px;" class="card-title">{{
                                                @device->getDeviceModel() }}</h5>
                                            <p class="text-muted">{{ @device->getDeviceCodename() }}</p>
                                            <p style="margin-top: auto;" class="card-text">By {{ @device->getDeveloper()
                                                }}</p>
                                            <a style="margin-top: auto;" href="{{ @device->getUrl() }}" target="_blank"
                                               class="btn btn-primary">Download</a>
                                        </div>
                                    </div>
                                </repeat>
                            </div>
                        </false>

                    </check>
                </repeat>
            </div>
        </div>
    </true>

    <false>
        <div class="position-relative overflow-hidden p-3 p-md-5 m-md-3 text-center bg-light">
            <div class="product-device box-shadow d-none d-md-block"></div>
            <div class="product-device product-device-2 box-shadow d-none d-md-block"></div>
            <div class="col-md-5 p-lg-5 mx-auto my-5">
                <h1 class="display-4 font-weight-normal">Temporary unavailable</h1>
                <p class="lead font-weight-normal"><br>Technical work in progress, please check back later.</p>
                <p class="lead font-weight-normal">Also, you can use our <a target="_blank"
                                                                            href="https://sourceforge.net/projects/syberiaos/files/">SourceForge</a>
                    <br>for download ROM now.<br><br></p>
                <a class="btn btn-outline-secondary" href="/">Home</a>
            </div>
        </div>
    </false>
</check>
