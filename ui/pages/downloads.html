{* <!-- TODO: make a list of links to download ROM --> *}

<check if="{{ @isDownloadPortalEnabled }}">
    <true>
        <div class="position-relative overflow-hidden p-3 p-md-5 m-md-3 text-center bg-light">
            <div class="mx-auto" style="max-width: 700px;">

                <repeat group="{{ @officialDevices }}" key="{{ @brand }}" value="{{ @devices }}">
                    <h1 class="display-4 font-weight-normal mb-4">{{ @brand }}</h1>

                    <div id="{{@brand}}Accordion" style="margin-bottom: 30px;">
                        <repeat group="{{ @devices }}" value="{{ @device }}">
                            <div class="card">
                                <div class="card-header" id="{{@device->getDeviceCodename()}}Heading">
                                    <h5 class="mb-0">
                                        <button class="btn btn-link" data-toggle="collapse"
                                                data-target="#{{@device->getDeviceCodename()}}Collapse"
                                                aria-expanded="true"
                                                aria-controls="{{@device->getDeviceCodename()}}Collapse">
                                            {{@device->getDeviceModel()}}
                                        </button>
                                    </h5>
                                </div>

                                <div id="{{@device->getDeviceCodename()}}Collapse" class="collapse"
                                     aria-labelledby="{{@device->getDeviceCodename()}}Heading"
                                     data-parent="#{{@brand}}Accordion">
                                    <div class="card-body text-left">
                                        <p class="text-muted" style="margin-bottom: 8px;">Brand: <b>{{
                                            @device->getDeviceBrand() }}</b></p>
                                        <p class="text-muted" style="margin-bottom: 8px;">Model: <b>{{
                                            @device->getDeviceModel() }}</b></p>
                                        <p class="text-muted" style="margin-bottom: 8px;">Codename: <b>{{
                                            @device->getDeviceCodename() }}</b></p>
                                        <p class="text-muted" style="margin-bottom: 8px;">Maintainer: <b>{{
                                            @device->getDeveloper() }}</b></p>
                                        <p class="text-muted" style="margin-bottom: 8px;">ROM size: <b>{{
                                            round(@device->getFilesize() / 1024 / 1024, 1) }} MB</b></p>
                                        <p class="text-muted" style="margin-bottom: 8px;">Build date (version):
                                            <b>{{ @device->getBuildDate() }}
                                                <check if="{{ @device->getVersion() !== null }}">
                                                    <true> ({{ @device->getVersion() }})</true>
                                                </check>
                                            </b></p>

                                        <div class="text-center">
                                            <a onclick="handleOutboundLinkClicks('{{ @device->getUrl() }}', 'Download', '{{ @device->getDeviceModel() }} ({{ @device->getDeviceCodename() }})')"
                                               style="margin-top: auto;" href="{{ @device->getUrl() }}"
                                               target="_blank"
                                               class="btn btn-primary">Download</a>

                                            <check if="{{ @device->getChangelog() !== null }}">
                                                <true>
                                                    <a style="margin-top: auto;" class="btn btn-primary"
                                                       data-toggle="modal"
                                                       data-target="#{{@device->getDeviceCodename()}}Changelog"
                                                       href="#">
                                                        Changelog
                                                    </a>
                                                </true>
                                            </check>
                                        </div>


                                        <!-- Modal -->
                                        <div class="modal fade" id="{{@device->getDeviceCodename()}}Changelog"
                                             tabindex="-1"
                                             role="dialog" aria-labelledby="{{@device->getDeviceCodename()}}ModalTitle"
                                             aria-hidden="true">
                                            <div class="modal-dialog" role="document">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <h5 class="modal-title"
                                                            id="{{@device->getDeviceCodename()}}ModalTitle">{{
                                                            @device->getDeviceModel() }} Changelog</h5>
                                                        <button type="button" class="close" data-dismiss="modal"
                                                                aria-label="Close">
                                                            <span aria-hidden="true">&times;</span>
                                                        </button>
                                                    </div>
                                                    <div class="modal-body">
                                                        <pre>{{ @device->getChangelog() }}</pre>
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-secondary"
                                                                data-dismiss="modal">Close
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </repeat>
                    </div>
                </repeat>
            </div>
        </div>
    </true>

    <false>
        <div class="position-relative overflow-hidden p-3 p-md-5 m-md-3 text-center bg-light">
            <div class="product-device box-shadow d-none d-md-block"></div>
            <div class="product-device product-device-2 box-shadow d-none d-md-block"></div>
            <div class="col-md-5 p-lg-5 mx-auto my-5">
                <h1 class="display-4 font-weight-normal">Temporary unavailable</h1>
                <p class="lead font-weight-normal"><br>Technical work in progress, please check back later.</p>
                <p class="lead font-weight-normal">Also, you can use our <a target="_blank"
                                                                            href="https://sourceforge.net/projects/syberiaos/files/">SourceForge</a>
                    <br>for download ROM now.<br><br></p>
                <a class="btn btn-outline-secondary" href="/">Home</a>
            </div>
        </div>
    </false>
</check>
